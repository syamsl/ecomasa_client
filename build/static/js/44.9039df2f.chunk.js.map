{"version":3,"sources":["pages/auth/Register.js"],"names":["Register","history","useState","email","setEmail","user","useSelector","state","useEffect","token","push","handleSubmit","e","a","config","url","process","handleCodeInApp","sendSignInLinkToEmail","auth","toast","success","window","localStorage","setItem","validate","preventDefault","email_valid","document","getElementById","value","match","style","display","innerText","className","id","type","onChange","target","placeholder","autoFocus","required","onClick"],"mappings":"oMAkGeA,UA5FI,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QACpB,EAA0BC,mBAAS,IAAnC,mBAAOC,EAAP,KAAcC,EAAd,KAEQC,EAASC,aAAY,SAACC,GAAD,sBAAiBA,MAAtCF,KAERG,qBAAU,WACJH,GAAQA,EAAKI,OAAOR,EAAQS,KAAK,OACpC,CAACL,EAAMJ,IAGV,IAAMU,EAAY,uCAAG,WAAOC,GAAP,eAAAC,EAAA,6DAKbC,EAAS,CACbC,IAAKC,0CACLC,iBAAiB,GAPA,SAabC,YAAsBC,IAAMhB,EAAOW,GAbtB,OAcnBM,IAAMC,QAAN,2BACsBlB,EADtB,+CAKAmB,OAAOC,aAAaC,QAAQ,uBAAwBrB,GAGpDC,EAAS,IAtBU,2CAAH,sDAyBdqB,EAAW,SAACb,GACZA,EAAEc,iBAEF,IAEIC,GAAc,EAFFC,SAASC,eAAe,eAAeC,MAKzCC,MAAM,kDAIlBH,SAASC,eAAe,YAAYG,MAAMC,QAAU,OACpDN,GAAc,IAJdC,SAASC,eAAe,YAAYK,UAAY,sBAChDP,GAAc,GAMbA,GACDhB,KA4BN,OACE,qBAAKwB,UAAU,gBAAf,SACE,qBAAKA,UAAU,MAAf,SACE,sBAAKA,UAAU,4BAAf,UACA,oBAAIA,UAAU,kCAAd,sBA1BJ,iCACE,uBACEC,GAAG,cACHC,KAAK,QACLF,UAAU,0BACVL,MAAO3B,EACPmC,SAAU,SAAC1B,GAAD,OAAOR,EAASQ,EAAE2B,OAAOT,QACnCU,YAAY,QACZC,WAAS,EACTC,UAAQ,IAET,sBAAMN,GAAG,WAAWD,UAAU,gBAC/B,uBACA,qBAAKA,UAAU,gCAAf,SACA,wBAAQE,KAAK,SAASM,QAASlB,EAAUU,UAAU,kDAAnD","file":"static/js/44.9039df2f.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { auth } from \"../../firebase\";\nimport {sendSignInLinkToEmail} from 'firebase/auth'\nimport { toast } from \"react-toastify\";\nimport { useSelector } from \"react-redux\";\n\n  const Register = ({ history }) => {\n  const [email, setEmail] = useState(\"\");\n\n  const { user } = useSelector((state) => ({ ...state }));\n\n  useEffect(() => {\n    if (user && user.token) history.push(\"/\");\n  }, [user, history]);\n\n\n  const handleSubmit = async (e) => {\n    // e.preventDefault();\n\n    // console.log(\"ENV--->\", process.env.REACT_APP_REGISTER_REDIRECT_URL);\n\n    const config = {\n      url: process.env.REACT_APP_REGISTER_REDIRECT_URL,\n      handleCodeInApp: true,\n    };\n\n    // let data = await auth.sendSignInLinkToEmail(email,config);\n    // toast(\"Email send\");\n\n    await sendSignInLinkToEmail(auth, email, config);\n    toast.success(\n      `Email is sent to ${email}. Click the link to complete registration.`\n    );\n\n    //save user in local storage\n    window.localStorage.setItem(\"emailForRegistration\", email);\n\n    //clear state\n    setEmail(\"\");\n  };\n\nconst validate = (e) =>{\n      e.preventDefault()\n\n      var val_email = document.getElementById(\"regis_email\").value\n\n      let email_valid = false\n       let mailRegex = /^([a-zA-Z0-9_.+-])+\\@(([a-zA-Z0-9-])+\\.)+([a-zA-Z0-9]{2,4})+$/;\n\n      if(!val_email.match(/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/)){\n        document.getElementById('errEmail').innerText = 'Email is not valid!'\n        email_valid = false\n      }else{\n        document.getElementById('errEmail').style.display = 'none'\n        email_valid = true\n      }\n      \n      if(email_valid){\n        handleSubmit()\n      }\n\n}\n\n  const registerForm = () => (\n    <form >\n      <input\n        id=\"regis_email\"\n        type=\"email\"\n        className=\"form-control grad-input\"\n        value={email}\n        onChange={(e) => setEmail(e.target.value)}\n        placeholder=\"Email\"\n        autoFocus\n        required\n      />\n       <span id='errEmail' className=\"text-danger\"></span>\n      <br />\n      <div className=\"d-flex justify-content-center\">\n      <button type=\"submit\" onClick={validate} className=\"btn btn-raised mt-3 text-white shaw grad-button\">\n        Register\n      </button>\n      </div>\n      \n    </form>\n  );\n\n  return (\n    <div className=\"container p-5\">\n      <div className=\"row\">\n        <div className=\"col-md-6 offset-md-3 mt-5\">\n        <h2 className=\"text-center text-secondary shaw\">Register</h2>\n        {registerForm()}\n        </div>\n      </div>\n    </div>\n  );\n  }\n\nexport default Register;\n"],"sourceRoot":""}