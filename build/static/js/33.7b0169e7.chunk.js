(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[33],{1132:function(e,t,n){"use strict";n.r(t);var a=n(30),c=n(22),s=n(1),r=n(39),i=n(51),l=n(340),o=n.n(l),d=n(0),u=n.n(d),j=n(3),m=n(38),b=n.n(m),h=function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("".concat("/api","/coupons"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(j.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.delete("".concat("/api","/coupon/").concat(t),{headers:{authtoken:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),p=function(){var e=Object(j.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("".concat("/api","/coupon"),{coupon:t},{headers:{authtoken:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),O=(n(312),n(174)),v=n(281),g=n(7);t.default=function(){var e=Object(s.useState)(""),t=Object(c.a)(e,2),n=t[0],l=t[1],d=Object(s.useState)(""),u=Object(c.a)(d,2),j=u[0],m=u[1],b=Object(s.useState)(""),f=Object(c.a)(b,2),N=f[0],y=f[1],w=Object(s.useState)(!1),E=Object(c.a)(w,2),C=E[0],k=E[1],D=Object(s.useState)([]),B=Object(c.a)(D,2),I=B[0],T=B[1],S=Object(r.c)((function(e){return Object(a.a)({},e)})).user;Object(s.useEffect)((function(){M()}),[]);var M=function(){return h().then((function(e){return T(e.data)}))};return Object(g.jsx)("div",{className:"container-fluid text-lg mt-5",children:Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col-md-2",children:Object(g.jsx)(O.a,{})}),Object(g.jsxs)("div",{className:"col-md-10",children:[Object(g.jsx)("h4",{className:"mt-3",children:C?Object(g.jsx)("b",{className:"text-danger",children:"Loading..."}):Object(g.jsx)("h2",{className:"text-secondary shaw  text-center",children:"Coupon"})}),Object(g.jsxs)("form",{children:[Object(g.jsxs)("div",{className:"form-group",children:[Object(g.jsx)("label",{className:"text-muted",children:"Coupon code:"}),Object(g.jsx)("input",{id:"coup-code",type:"text",className:" grad-input m-2",onChange:function(e){return l(e.target.value)},value:n,autoFocus:!0,required:!0})]}),Object(g.jsx)("span",{id:"errCode",className:"text-danger"}),Object(g.jsxs)("div",{className:"form-group",children:[Object(g.jsx)("label",{className:"text-muted",children:"Discount % : "}),Object(g.jsx)("input",{id:"coup-dis",type:"Number",className:"grad-input m-2",onChange:function(e){return y(e.target.value)},value:N,autoFocus:!0,required:!0})]}),Object(g.jsx)("span",{id:"errDiscount",className:"text-danger"}),Object(g.jsxs)("div",{className:"form-group",children:[Object(g.jsx)("label",{className:"text-muted text-center",children:"Expiry :"}),Object(g.jsx)("br",{}),Object(g.jsx)(o.a,{id:"coup-exp",className:"grad-input",selected:j||new Date,value:j,onChange:function(e){return m(e)},required:!0}),Object(g.jsx)("span",{id:"errExpiry",className:"text-danger"})]}),Object(g.jsx)("div",{children:Object(g.jsx)("button",{className:"btn btn-raised text-white shaw grad-button text-center",onClick:function(e){e.preventDefault();var t=document.getElementById("coup-code"),a=document.getElementById("coup-dis"),c=document.getElementById("coup-exp"),s=!1,r=!1,o=!1;""===t.value?(document.getElementById("errCode").innerText="This field cannot be empty!",s=!1):t.value.length<6?(document.getElementById("errCode").innerText="Coupon code should have atleast 6 characters.",s=!1):t.value.length<10?(document.getElementById("errCode").innerText="Coupon code should only have atmost 10 characters.",s=!1):(document.getElementById("errCode").style.display="none",s=!0),""===a.value?(document.getElementById("errDiscount").innerText="This field cannot be empty!",r=!1):a.value<1||a.value>99?(document.getElementById("errDiscount").innerText="Coupon discount need to be within range 1 to 99.",r=!1):(document.getElementById("errDiscount").style.display="none",r=!0),""===c.value?(document.getElementById("errExpiry").innerText="This field cannot be empty!",o=!1):new Date(c.value)<Date.now()?(document.getElementById("errExpiry").innerText="Select a valid expiry date.",o=!1):(document.getElementById("errExpiry").style.display="none",o=!0),s&&r&&o&&(k(!0),p({name:n,expiry:j,discount:N},S.token).then((function(e){k(!1),M(),l(""),y(""),m(""),i.b.success("".concat(e.data.name," is created"))})).catch((function(e){return console.log("create coupon err===>",e)})))},children:Object(g.jsx)("b",{children:"Save"})})})]}),Object(g.jsx)("br",{}),Object(g.jsxs)("h4",{className:"text-center text-secondary shaw m-3",children:["Coupons - ",I.length]}),Object(g.jsxs)("table",{className:"table table-bordered",children:[Object(g.jsx)("thead",{className:"thead-light",children:Object(g.jsxs)("tr",{children:[Object(g.jsx)("th",{className:"text-center",scope:"col",children:"Coupon code"}),Object(g.jsx)("th",{className:"text-center",scope:"col",children:"Expiry"}),Object(g.jsx)("th",{className:"text-center",scope:"col",children:"Discount"}),Object(g.jsx)("th",{className:"text-center",scope:"col",children:"Action"})]})}),Object(g.jsx)("tbody",{children:I.map((function(e){return Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{className:"text-center",children:e.name}),Object(g.jsx)("td",{className:"text-center",children:new Date(e.expiry).toLocaleDateString()}),Object(g.jsxs)("td",{className:"text-center",children:[e.discount,"%"]}),Object(g.jsx)("td",{className:"text-center",children:Object(g.jsx)(v.a,{onClick:function(){return t=e._id,void(window.confirm("Delete?")&&(k(!0),x(t,S.token).then((function(e){M(),k(!1),i.b.info('Coupon "'.concat(e.data.name,'" deleted'))})).catch((function(e){return console.log(e)}))));var t},className:"text-danger btn-lg pointer"})})]},e._id)}))})]})]})]})})}},174:function(e,t,n){"use strict";n(1);var a=n(44),c=n(7);t.a=function(){return Object(c.jsx)("nav",{children:Object(c.jsxs)("ul",{className:"nav flex-column",children:[Object(c.jsx)("li",{className:"nav-item btn btn-raised grad",children:Object(c.jsx)(a.b,{to:"/admin/dashboard",className:"nav-link text-white shaw",children:"Dashboard"})}),Object(c.jsx)("li",{className:"nav-item btn btn-raised grad",children:Object(c.jsx)(a.b,{to:"/admin/order-management",className:"nav-link text-white shaw",children:"Order Management"})}),Object(c.jsx)("li",{className:"nav-item btn btn-raised grad",children:Object(c.jsx)(a.b,{to:"/admin/user-management",className:"nav-link text-white shaw",children:"User Management"})}),Object(c.jsx)("li",{className:"nav-item btn btn-raised grad",children:Object(c.jsx)(a.b,{to:"/admin/products",className:"nav-link text-white shaw",children:"Product Management"})}),Object(c.jsx)("li",{className:"nav-item btn btn-raised grad",children:Object(c.jsx)(a.b,{to:"/admin/category",className:"nav-link text-white shaw ",children:"Category Management"})}),Object(c.jsx)("li",{className:"nav-item btn btn-raised grad",children:Object(c.jsx)(a.b,{to:"/admin/offer-management",className:"nav-link text-white shaw",children:"Offer Management"})}),Object(c.jsx)("li",{className:"nav-item btn btn-raised grad",children:Object(c.jsx)(a.b,{to:"/admin/sales",className:"nav-link text-white shaw",children:"Sales"})}),Object(c.jsx)("li",{className:"nav-item btn btn-raised grad",children:Object(c.jsx)(a.b,{to:"/admin/coupon",className:"nav-link text-white shaw",children:"Coupon"})})]})})}},281:function(e,t,n){"use strict";var a=n(43),c=n(1),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},r=n(147),i=function(e,t){return c.createElement(r.a,Object(a.a)(Object(a.a)({},e),{},{ref:t,icon:s}))};i.displayName="DeleteOutlined";t.a=c.forwardRef(i)},312:function(e,t,n){}}]);
//# sourceMappingURL=33.7b0169e7.chunk.js.map