{"version":3,"sources":["functions/coupon.js","pages/admin/CreateCouponPage.js","components/nav/AdminNav.js","../node_modules/@ant-design/icons-svg/es/asn/DeleteOutlined.js","../node_modules/@ant-design/icons/es/icons/DeleteOutlined.js"],"names":["getCoupons","a","axios","get","process","removeCoupon","couponId","authtoken","delete","headers","createCoupon","coupon","post","CreateCouponPage","useState","name","setName","expiry","setExpiry","discount","setDiscount","loading","setLoading","coupons","setCoupons","user","useSelector","state","useEffect","loadAllCoupons","then","res","data","className","AdminNav","id","type","onChange","e","target","value","autoFocus","required","selected","Date","date","onClick","preventDefault","val_code","document","getElementById","val_discount","val_expiry","code_valid","discount_valid","expiry_valid","innerText","length","style","display","now","token","toast","success","catch","err","console","log","scope","map","c","toLocaleDateString","DeleteOutlined","_id","window","confirm","info","to","props","ref","React","AntdIcon","_objectSpread","icon","DeleteOutlinedSvg","displayName"],"mappings":"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","file":"static/js/33.31dc14ff.chunk.js","sourcesContent":["import axios from \"axios\";\n\nexport const getCoupons = async () =>\n  await axios.get(`${process.env.REACT_APP_API}/coupons`);\n\nexport const removeCoupon = async (couponId, authtoken) =>\n  await axios.delete(`${process.env.REACT_APP_API}/coupon/${couponId}`, {\n    headers: {\n      authtoken,\n    },\n  });\n\nexport const createCoupon = async (coupon, authtoken) =>\n  await axios.post(\n    `${process.env.REACT_APP_API}/coupon`,\n    { coupon },\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n","import React, { useState, useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { toast } from \"react-toastify\";\nimport DatePicker from \"react-datepicker\";\nimport { getCoupons, removeCoupon, createCoupon } from \"../../functions/coupon\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport AdminNav from \"../../components/nav/AdminNav\";\n\nimport { DeleteOutlined } from \"@ant-design/icons\";\n\nconst CreateCouponPage = () => {\n  const [name, setName] = useState(\"\");\n  const [expiry, setExpiry] = useState(\"\");\n  const [discount, setDiscount] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [coupons, setCoupons] = useState([]);\n\n  //redux\n  const { user } = useSelector((state) => ({ ...state }));\n\n  useEffect(() => {\n    loadAllCoupons();\n  }, []);\n\n  const loadAllCoupons = () => getCoupons().then((res) => setCoupons(res.data));\n\n  const handleSubmit = (e) => {\n   \n    setLoading(true);\n    // console.log(name,expiry, discount)\n    createCoupon({ name, expiry, discount }, user.token)\n      .then((res) => {\n        setLoading(false);\n        loadAllCoupons();\n        setName(\"\");\n        setDiscount(\"\");\n        setExpiry(\"\");\n        toast.success(`${res.data.name} is created`);\n      })\n      .catch((err) => console.log(\"create coupon err===>\", err));\n  };\n\n  const handleRemove = (couponId) => {\n    if (window.confirm(\"Delete?\")) {\n      setLoading(true);\n      removeCoupon(couponId, user.token)\n        .then((res) => {\n          loadAllCoupons();\n          setLoading(false);\n          toast.info(`Coupon \"${res.data.name}\" deleted`);\n        })\n        .catch((err) => console.log(err));\n    }\n  };\n\n  const validate = (e) => {\n    e.preventDefault()\n    var val_code = document.getElementById(\"coup-code\")\n    var val_discount = document.getElementById(\"coup-dis\")\n    var val_expiry = document.getElementById(\"coup-exp\")\n\n    let code_valid = false\n    let discount_valid = false\n    let expiry_valid = false\n\n    if (val_code.value === '') {\n      document.getElementById('errCode').innerText = 'This field cannot be empty!'\n      code_valid = false\n    } else if (val_code.value.length< 6) {\n      document.getElementById('errCode').innerText = 'Coupon code should have atleast 6 characters.'\n      code_valid = false   \n    } else if (val_code.value.length<10) {\n      document.getElementById('errCode').innerText = 'Coupon code should only have atmost 10 characters.'\n      code_valid = false   \n    } else {\n      document.getElementById('errCode').style.display = 'none'\n        code_valid=true\n    }\n\n    if (val_discount.value === '') {\n      document.getElementById('errDiscount').innerText = 'This field cannot be empty!'\n      discount_valid = false\n    } else if (val_discount.value<1 || val_discount.value>99) {\n      document.getElementById('errDiscount').innerText = 'Coupon discount need to be within range 1 to 99.'\n      discount_valid = false   \n    }  else {\n      document.getElementById('errDiscount').style.display = 'none'\n      discount_valid=true\n    }\n\n    if (val_expiry.value === '') {\n      document.getElementById('errExpiry').innerText = 'This field cannot be empty!'\n      expiry_valid = false\n    } else if (new Date(val_expiry.value)<Date.now()) {\n      document.getElementById('errExpiry').innerText = 'Select a valid expiry date.'\n      expiry_valid = false   \n    }  else {\n      document.getElementById('errExpiry').style.display = 'none'\n      expiry_valid=true\n    }\n\n    if (code_valid && discount_valid &&  expiry_valid) {\n      handleSubmit();\n  }\n\n\n  }\n\n  return (\n    <div className=\"container-fluid text-lg mt-5\">\n      <div className=\"row\">\n        <div className=\"col-md-2\">\n          <AdminNav />\n        </div>\n        <div className=\"col-md-10\">\n          <h4 className=\"mt-3\">\n            {loading ? (\n              <b className=\"text-danger\">Loading...</b>\n            ) : (\n              <h2 className=\"text-secondary shaw  text-center\">Coupon</h2>\n            )}\n          </h4>\n          <form >\n\n            <div className=\"form-group\">\n              <label className=\"text-muted\">Coupon code:</label>\n              <input\n                id=\"coup-code\"\n                type=\"text\"\n                className=\" grad-input m-2\"\n                onChange={(e) => setName(e.target.value)}\n                value={name}\n                autoFocus\n                required\n              ></input>\n             \n            </div>\n            <span id='errCode' className=\"text-danger\"></span>\n            <div className=\"form-group\">\n              <label className=\"text-muted\">Discount % : </label>\n              <input\n                id=\"coup-dis\"\n                type=\"Number\"\n                className=\"grad-input m-2\"\n                onChange={(e) => setDiscount(e.target.value)}\n                value={discount}\n                autoFocus\n                required\n              ></input>\n             \n            </div>\n            <span id='errDiscount' className=\"text-danger\"></span>\n            <div className=\"form-group\">\n              <label className=\"text-muted text-center\">Expiry :</label>\n              <br />\n              <DatePicker\n                id=\"coup-exp\"\n                className=\"grad-input\"\n                selected={expiry ? expiry : new Date()}\n                value={expiry}\n                onChange={(date) => setExpiry(date)}\n                required\n              />\n              <span id='errExpiry' className=\"text-danger\"></span>\n            </div>\n            <div>\n              <button className=\"btn btn-raised text-white shaw grad-button text-center\" onClick={validate}>\n                <b>Save</b>\n              </button>\n            </div>\n\n          </form>\n\n          <br />\n          <h4 className=\"text-center text-secondary shaw m-3\">\n            Coupons - {coupons.length}\n          </h4>\n\n          <table className=\"table table-bordered\">\n            <thead className=\"thead-light\">\n              <tr>\n                <th className=\"text-center\" scope=\"col\">\n                  Coupon code\n                </th>\n                <th className=\"text-center\" scope=\"col\">\n                  Expiry\n                </th>\n                <th className=\"text-center\" scope=\"col\">\n                  Discount\n                </th>\n                <th className=\"text-center\" scope=\"col\">\n                  Action\n                </th>\n              </tr>\n            </thead>\n            {/* {JSON.stringify(coupons)} */}\n            <tbody>\n              {coupons.map((c) => (\n                <tr key={c._id}>\n                  <td className=\"text-center\">{c.name}</td>\n                  <td className=\"text-center\">\n                    {new Date(c.expiry).toLocaleDateString()}\n                  </td>\n                  <td className=\"text-center\">{c.discount}%</td>\n                  <td className=\"text-center\">\n                    <DeleteOutlined\n                      onClick={() => handleRemove(c._id)}\n                      className=\"text-danger btn-lg pointer\"\n                    />\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n};\nexport default CreateCouponPage;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nconst AdminNav = () => (\n  <nav>\n    <ul className=\"nav flex-column\">\n      <li className=\"nav-item btn btn-raised grad\">\n        <Link to=\"/admin/dashboard\" className=\"nav-link text-white shaw\">\n          Dashboard\n        </Link>\n      </li>\n\n      <li className=\"nav-item btn btn-raised grad\">\n        <Link to=\"/admin/order-management\" className=\"nav-link text-white shaw\">\n          Order Management\n        </Link>\n      </li>\n\n      <li className=\"nav-item btn btn-raised grad\">\n        <Link to=\"/admin/user-management\" className=\"nav-link text-white shaw\">\n          User Management\n        </Link>\n      </li>\n\n      <li className=\"nav-item btn btn-raised grad\">\n        <Link to=\"/admin/products\" className=\"nav-link text-white shaw\">\n          Product Management\n        </Link>\n      </li>\n\n      <li className=\"nav-item btn btn-raised grad\">\n        <Link to=\"/admin/category\" className=\"nav-link text-white shaw \">\n          Category Management\n        </Link>\n      </li>\n\n      <li className=\"nav-item btn btn-raised grad\">\n        <Link to=\"/admin/offer-management\" className=\"nav-link text-white shaw\">\n          Offer Management\n        </Link>\n      </li>\n\n      <li className=\"nav-item btn btn-raised grad\">\n        <Link to=\"/admin/sales\" className=\"nav-link text-white shaw\">\n          Sales\n        </Link>\n      </li>\n\n      <li className=\"nav-item btn btn-raised grad\">\n        <Link to=\"/admin/coupon\" className=\"nav-link text-white shaw\">\n          Coupon\n        </Link>\n      </li>\n\n    </ul>\n  </nav>\n);\n\nexport default AdminNav;\n","// This icon file is generated automatically.\nvar DeleteOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z\" } }] }, \"name\": \"delete\", \"theme\": \"outlined\" };\nexport default DeleteOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport DeleteOutlinedSvg from \"@ant-design/icons-svg/es/asn/DeleteOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar DeleteOutlined = function DeleteOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: DeleteOutlinedSvg\n  }));\n};\n\nDeleteOutlined.displayName = 'DeleteOutlined';\nexport default /*#__PURE__*/React.forwardRef(DeleteOutlined);"],"sourceRoot":""}